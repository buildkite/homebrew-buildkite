# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Bktec < Formula
  desc "Buildkite Test Engine Client"
  homepage "https://github.com/buildkite/test-engine-client"
  version "1.2.1"

  on_macos do
    on_intel do
      url "https://github.com/buildkite/test-engine-client/releases/download/v1.2.1/bktec_1.2.1_darwin_amd64"
      sha256 "27dbbb69ed26d9f48ed4a8b732c0fbaf64438009c0c456f058dd77d915694c9b"

      def install
        bin.install "bktec_1.2.1_darwin_amd64" => "bktec"
      end
    end
    on_arm do
      url "https://github.com/buildkite/test-engine-client/releases/download/v1.2.1/bktec_1.2.1_darwin_arm64"
      sha256 "5032ff4a69703cb4eb8d49e6aa1bddeec28e30f5cd19c838bbf535e71142c401"

      def install
        bin.install "bktec_1.2.1_darwin_arm64" => "bktec"
      end
    end
  end

  on_linux do
    on_intel do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/buildkite/test-engine-client/releases/download/v1.2.1/bktec_1.2.1_linux_amd64"
        sha256 "fab9c11bd75a73d6b59b553ce25444bb25d453b4d35e8f9d3b4065d7e4f92c9c"

        def install
          bin.install "bktec_1.2.1_linux_amd64" => "bktec"
        end
      end
    end
    on_arm do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/buildkite/test-engine-client/releases/download/v1.2.1/bktec_1.2.1_linux_arm64"
        sha256 "3379dc1ead48d95c47b27db429bd27c7c2e29ac8d2e223bce31af3089ff7be92"

        def install
          bin.install "bktec_1.2.1_linux_arm64" => "bktec"
        end
      end
    end
  end

  test do
    version_output = shell_output("bktec --version")
    assert_match "v#{version}\n", version_output
  end
end
