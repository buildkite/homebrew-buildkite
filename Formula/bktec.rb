# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Bktec < Formula
  desc "Buildkite Test Engine Client"
  homepage "https://github.com/buildkite/test-engine-client"
  version "2.2.0"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/buildkite/test-engine-client/releases/download/v2.2.0/bktec_2.2.0_darwin_amd64"
      sha256 "6dff8709a4357146a36c87ea318288567b2535d92b82ebf9c9d5be980f5c5890"

      define_method(:install) do
        bin.install "bktec_2.2.0_darwin_amd64" => "bktec"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/buildkite/test-engine-client/releases/download/v2.2.0/bktec_2.2.0_darwin_arm64"
      sha256 "d0f4cb65f3afc2630e1a14d62528bdfb0da533449f00c81bfa004c294fb17ead"

      define_method(:install) do
        bin.install "bktec_2.2.0_darwin_arm64" => "bktec"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/buildkite/test-engine-client/releases/download/v2.2.0/bktec_2.2.0_linux_amd64"
      sha256 "d20d988da61be9dffd8903af24ae5b3fdc116c32bb95d067787c39cfa5c7a485"
      define_method(:install) do
        bin.install "bktec_2.2.0_linux_amd64" => "bktec"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/buildkite/test-engine-client/releases/download/v2.2.0/bktec_2.2.0_linux_arm64"
      sha256 "cad71c9540ed13ece8bd9c3f4af81e4484b702cadb7307652476ee4045d3b2ed"
      define_method(:install) do
        bin.install "bktec_2.2.0_linux_arm64" => "bktec"
      end
    end
  end

  test do
    version_output = shell_output("bktec --version")
    assert_match "v#{version}\n", version_output
  end
end
